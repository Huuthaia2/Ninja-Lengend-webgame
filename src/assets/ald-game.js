window.wx&&!window.qq&&!window.tt&&function(){function e(){var e="";try{e=wx.getStorageSync("aldstat_op")}catch(t){e=wx.getStorageSync("aldstat_op")}if(""===e){if(""===l)return"";try{v=e=wx.getStorageSync(l),e&&wx.setStorageSync("aldstat_op",e)}catch(t){v=e=wx.getStorageSync(l),e&&wx.setStorageSync("aldstat_op",e)}}return e}function t(e){function t(e){return Object.prototype.toString.call(e)}var n={};return"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(e,t){n["[object "+e+"]"]=e.toLowerCase()}),null==e?e:"object"==typeof e||"function"==typeof e?n[t.call(e)]||"object":typeof e}function n(e){for(var t in e)if("object"==typeof e[t]&&null!==e[t])return!0;return!1}function a(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}function s(t,n){function a(){return new Promise(function(e,n){wx.request({url:"https://"+c+".aldwx.com/d.html",data:t,header:{se:m||"",op:v||"",img:N||""},method:"GET",fail:function(){e("")},success:function(t){e(200==t.statusCode?"":"status error")}})})}d.useOpen&&e(),y++,t.as=I,t.at=x,t.rq_c=y,t.ifo=p,t.ak=d.app_key,t.uu=g,t.v=u,t.st=Date.now(),t.ev=n,t.te=f,t.wsr=S,""!==r(t.ufo)&&(t.ufo=t.ufo),t.ec=w,d.useOpen?""===v?C.push(a):(wx.Queue.push(a),C.concat()):wx.Queue.push(a)}function r(e){if(void 0===e||""===e)return"";var t={};for(var n in e)"rawData"!=n&&"errMsg"!=n&&(t[n]=e[n]);return t}function i(e){var t={};for(var n in e)t[n]=e[n];return t}function o(e){for(var t="",n=0;n<e.length;n++)e[n].length>t.length&&(t=e[n]);return t}var u="3.2.0",c="glog",d=require("./ald-game-conf");""===d.app_key&&console.error("\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u586b\u5199\u60a8\u7684app_key"),d.useOpen&&console.warn("\u63d0\u793a\uff1a\u5f00\u542f\u4e86useOpen\u914d\u7f6e\u540e\uff0c\u5982\u679c\u4e0d\u4e0a\u4f20\u7528\u6237opendId\u5219\u4e0d\u4f1a\u4e0a\u62a5\u6570\u636e\u3002"),d.app_key=d.app_key.replace(/\s/g,"");var l=d.openKey,f="wg";wx.request({url:"https://"+c+".aldwx.com/config/app.json",method:"GET",success:function(e){200===e.statusCode&&(e.data.version>u&&console.warn("\u60a8\u7684SDK\u4e0d\u662f\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u5c3d\u5feb\u5347\u7ea7\uff01"),e.data.warn&&console.warn(e.data.warn),e.data.error&&console.error(e.data.error))}});var p="",g=function(){var e="";try{e=wx.getStorageSync("aldstat_uuid"),wx.setStorageSync("ald_ifo",!0)}catch(t){e="uuid_getstoragesync"}if(e)p=!1;else{e=a(),p=!0;try{wx.setStorageSync("aldstat_uuid",e)}catch(e){wx.setStorageSync("aldstat_uuid","uuid_getstoragesync")}}return e}(),h={},m="",v=e(),w=0,y="",S=wx.getLaunchOptionsSync(),_=Date.now(),x=""+Date.now()+Math.floor(1e7*Math.random()),I=""+Date.now()+Math.floor(1e7*Math.random()),q=0,b="",N="",O=!0,j=!1,k=["aldSendEvent","aldOnShareAppMessage","aldShareAppMessage","aldSendSession","aldSendOpenid","aldLevelEvent"],M=["payStart","paySuccess","payFail","die","revive","tools","award"],D=["complete","fail"],L=wx.getStorageSync("ald_level_time")||0,P=wx.getStorageSync("ald_level_session")||"";void 0===wx.Queue&&(wx.Queue=new function(){this.concurrency=4,this.queue=[],this.tasks=[],this.activeCount=0;var e=this;this.push=function(t){this.tasks.push(new Promise(function(n,a){var s=function(){e.activeCount++,t().then(function(e){n(e)}).then(function(){e.next()})};e.activeCount<e.concurrency?s():e.queue.push(s)}))},this.all=function(){return Promise.all(this.tasks)},this.next=function(){e.activeCount--,e.queue.length>0&&e.queue.shift()()}},wx.Queue.all());var C=new function(){this.request=[],this.push=function(e){this.request.length>=18?(this.request.shift(),this.request.push(e)):this.request.push(e)},this.concat=function(){this.request.map(function(e){wx.Queue.push(e)}),this.request=[]}};Promise.all([new Promise(function(e,t){wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){N=o(t.userInfo.avatarUrl.split("/")),e(t)},fail:function(){e("")}}):e("")},fail:function(){e("")}})}),new Promise(function(e,t){wx.getNetworkType({success:function(t){e(t)},fail:function(){e("")}})}),new Promise(function(e,t){d.getLocation?wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}):wx.getSetting({success:function(t){t.authSetting["scope.userLocation"]?(wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}),e("")):e("")},fail:function(){e("")}})})]).then(function(e){""!==e[2]?(h.lat=e[2].latitude||"",h.lng=e[2].longitude||"",h.spd=e[2].speed||""):(h.lat="",h.lng="",h.spd=""),""!==e[1]?h.nt=e[1].networkType||"":h.nt="";var t=i(h);""!==e[0]&&(t.ufo=e[0],b=e[0]),s(t,"init")}),wx.onShow(function(e){if(S=e,q=Date.now(),!O&&!j){x=""+Date.now()+Math.floor(1e7*Math.random()),p=!1;try{wx.setStorageSync("ald_ifo",!1)}catch(e){}}O=!1,j=!1;var t=i(h),n=i(h);t.sm=q-_,e.query.ald_share_src&&e.shareTicket&&"1044"===e.scene?(n.tp="ald_share_click",new Promise(function(e,t){"1044"==S.scene?wx.getShareInfo({shareTicket:S.shareTicket,success:function(t){e(t)},fail:function(){e("")}}):e("")}).then(function(e){n.ct=e,s(n,"event")})):e.query.ald_share_src&&(n.tp="ald_share_click",n.ct="1",s(n,"event")),s(t,"show")}),wx.onHide(function(){wx.setStorageSync("ald_level_session","");var e=i(h);e.dr=Date.now()-q,""===b?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){e.ufo=t,b=t,N=o(t.userInfo.avatarUrl.split("/")),s(e,"hide")}}):s(e,"hide")}}):s(e,"hide")}),wx.onError(function(e){var t=i(h);t.tp="ald_error_message",t.ct=e,w++,s(t,"event")});var E={aldSendEvent:function(e,t){var a=i(h);if(""!==e&&"string"==typeof e&&e.length<=255)if(a.tp=e,"string"==typeof t&&t.length<=255)a.ct=String(t),s(a,"event");else if("object"==typeof t){if(JSON.stringify(t).length>=255)return void console.error("\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53c2\u6570\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26");if(n(t))return void console.error("\u4e8b\u4ef6\u53c2\u6570\uff0c\u53c2\u6570\u5185\u90e8\u53ea\u652f\u6301Number,String\u7b49\u7c7b\u578b\uff0c\u8bf7\u53c2\u8003\u63a5\u5165\u6587\u6863");for(var r in t)"number"==typeof t[r]&&(t[r]=t[r]+"s##");a.ct=JSON.stringify(t),s(a,"event")}else void 0===t||""===t?s(a,"event"):console.error("\u4e8b\u4ef6\u53c2\u6570\u5fc5\u987b\u4e3aString,Object\u7c7b\u578b,\u4e14\u53c2\u6570\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26");else console.error("\u4e8b\u4ef6\u540d\u79f0\u5fc5\u987b\u4e3aString\u7c7b\u578b\u4e14\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")},aldOnShareAppMessage:function(e){wx.onShareAppMessage(function(){j=!0;var n=e(),a="";a=void 0!==S.query.ald_share_src?void 0!==n.query?(S.query.ald_share_src.indexOf(g),n.query+"&ald_share_src="+S.query.ald_share_src+","+g):(S.query.ald_share_src.indexOf(g),"ald_share_src="+S.query.ald_share_src+","+g):void 0!==n.query?n.query+"&ald_share_src="+g:"ald_share_src="+g,"undefined"!=t(n.ald_desc)&&(a+="&ald_desc="+n.ald_desc),n.query=a;var r=i(h);return r.ct=n,r.ct.sho=1,r.tp="ald_share_chain",s(r,"event"),n})},aldShareAppMessage:function(e){j=!0;var n=e,a="";a=void 0!==S.query.ald_share_src?void 0!==n.query?(S.query.ald_share_src.indexOf(g),n.query+"&ald_share_src="+S.query.ald_share_src+","+g):(S.query.ald_share_src.indexOf(g),"ald_share_src="+S.query.ald_share_src+","+g):void 0!==n.query?n.query+"&ald_share_src="+g:"ald_share_src="+g;var r=i(h);"undefined"!=t(n.ald_desc)&&(a+="&ald_desc="+n.ald_desc),n.query=a,r.ct=n,r.tp="ald_share_chain",s(r,"event"),wx.shareAppMessage(n)},aldSendSession:function(e){if(""!==e&&e){var t=i(h);t.tp="session",t.ct="session",m=e,""===b?wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(e){t.ufo=e,s(t,"event")}}):s(t,"event")}}):(t.ufo=b,""!==b&&(t.gid=""),s(t,"event"))}else console.error("\u8bf7\u4f20\u5165\u4ece\u540e\u53f0\u83b7\u53d6\u7684session_key")},aldSendOpenid:function(e){if(""!==e&&e){v=e,wx.setStorageSync("aldstat_op","openid");var t=i(h);t.tp="openid",t.ct="openid",s(t,"event")}else console.error("openID\u4e0d\u80fd\u4e3a\u7a7a")}};wx.aldStage=new function(){function e(e){return!/^\d+(.\d+)*$/.test(e.stageId)||e.stageId.length>32||isNaN(Number(e.stageId))?(console.warn("\u5173\u5361stageId\u5fc5\u987b\u7b26\u5408\u4f20\u53c2\u89c4\u5219,\u8bf7\u53c2\u8003\u6587\u6863\u3002"),!1):!("string"!==t(e.stageName)||e.stageName.length>32)||(console.warn("\u5173\u5361\u540d\u79f0\u4e3a\u5fc5\u4f20\u5b57\u6bb5,\u4e14\u957f\u5ea6\u5c0f\u4e8e32\u4e2a\u5b57\u7b26,\u8bf7\u53c2\u8003\u6587\u6863"),!1)}var n="",r="",o=0;this.onStart=function(s){if(e(s)){var i={};o=Date.now(),i.sid=s.stageId,i.snm=s.stageName,("string"===t(s.userId)&&s.userId)<32?i.uid=s.userId:i.uid="",i.state="start",r=a(),n=i,this.request()}},this.onRunning=function(a){if(e(a)){var s={params:{}};if(("string"===t(a.userId)&&a.userId)<32?s.uid=a.userId:s.uid="","string"!==t(a.event)&&-1===M.join(",").indexOf(a.event+","))return void console.warn("\u5173\u5361running\u72b6\u6001\u4e2d\u4ec5\u652f\u6301"+M.join(",")+"\u4e8b\u4ef6\u7c7b\u578b\uff0c\u4e14\u4e3a\u5fc5\u4f20\u5b57\u6bb5\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003\u6587\u6863\u3002");if(s.event=a.event,"object"!==t(a.params))return void console.warn("\u5173\u5361running\u72b6\u6001\u4e2dparams\u4e3a\u5fc5\u4f20\u5b57\u6bb5\uff0c\u4e14\u8be5\u5b57\u6bb5\u9700\u4e3aObject\u7c7b\u578b\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003\u6587\u6863\u3002");if("string"!==t(a.params.itemName)||a.params.itemName.length>32)return void console.warn("\u9053\u5177/\u5546\u54c1\u540d\u79f0\u4e3a\u5fc5\u4f20\u5b57\u6bb5\uff0c\u4e14\u957f\u5ea6\u5c0f\u4e8e32\u4e2a\u5b57\u7b26\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003\u6587\u6863");s.params.itnm=a.params.itemName,"string"===t(a.params.itemId)&&a.params.itemId.length<32&&(s.params.itid=a.params.itemId),"number"===t(a.params.itemCount)&&toString(a.params.itemCount).length<32?s.params.itco=a.params.itemCount:s.params.itco=1,-1!==a.event.indexOf("pay")&&("number"===t(a.params.itemMoney)&&toString(a.params.itemMoney).length<32?s.params.money=a.params.itemMoney:s.params.money=0),"string"===t(a.params.desc)&&a.params.desc.length<64&&(s.params.desc=a.params.desc),s.state="running",s.sid=a.stageId,s.snm=a.stageName,n=s,this.request()}},this.onEnd=function(a){if(e(a)){var s={state:"end"};if(("string"===t(a.userId)&&a.userId)<32?s.uid=a.userId:s.uid="",!t(a.event)&&-1!==D.join(",").indexOf(a.event+","))return void D.join(",");s.sid=a.stageId,s.snm=a.stageName,s.event=a.event,s.sdr=0!==o?Date.now()-o:"",s.params={},"object"===t(a.params)&&"string"===t(a.params.desc)&&a.params.desc.length<64&&(s.params.desc=a.params.desc),n=s,this.request()}},this.request=function(){var e=i(h);n.ss=r,e.ct=n,s(e,"screen")}},wx.aldLevel=new function(){function e(e){return!/^\d+(.\d+)*$/.test(e.levelId)||e.levelId.length>32||isNaN(Number(e.levelId))?(console.warn("levelId\u5fc5\u987b\u7b26\u5408\u4f20\u53c2\u89c4\u5219,\u8bf7\u53c2\u8003\u6587\u6863\u3002"),!1):!("string"!==t(e.levelName)||e.levelName.length>32)||(console.warn("levelName\u4e3a\u5fc5\u4f20\u5b57\u6bb5,\u4e14\u957f\u5ea6\u5c0f\u4e8e32\u4e2a\u5b57\u7b26,\u8bf7\u53c2\u8003\u6587\u6863"),!1)}var n="",r="",o=0;this.onInitLevel=function(s){if(e(s)){var i={};""==P?(r=a(),wx.setStorageSync("ald_level_session",r)):r=P,i.lid=s.levelId,i.lnm=s.levelName,("string"===t(s.userId)&&s.userId)<32?i.uid=s.userId:i.uid="",i.un=s.userName,i.state="init",n=i,this.request()}},this.onSetLevel=function(s){if(e(s)){var i={};r=a(),wx.setStorageSync("ald_level_session",r),i.lid=s.levelId,i.lnm=s.levelName,("string"===t(s.userId)&&s.userId)<32?i.uid=s.userId:i.uid="",i.un=s.userName,i.state="set",i.tmr=0!==L?Date.now()-L:"",o=Date.now(),wx.setStorageSync("ald_level_time",o),n=i,this.request()}},this.onPaySuccess=function(a){if(e(a)){var s={params:{}};if("object"!==t(a.params))return void console.warn("\u5173\u5361paySuccess\u72b6\u6001\u4e2dparams\u4e3a\u5fc5\u4f20\u5b57\u6bb5\uff0c\u4e14\u8be5\u5b57\u6bb5\u9700\u4e3aObject\u7c7b\u578b\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003\u6587\u6863\u3002");"number"===t(a.params.amount)&&toString(a.params.amount).length<32?s.params.am=a.params.amount:s.params.am=0,"string"===t(a.params.desc)&&a.params.desc.length<64&&(s.params.desc=a.params.desc),s.lid=a.levelId,s.lnm=a.levelName,("string"===t(a.userId)&&a.userId)<32?s.uid=a.userId:s.uid="",s.un=a.userName,s.state="paySuccess",n=s,this.request()}},this.onPayFail=function(a){if(e(a)){var s={params:{}};if("object"!==t(a.params))return void console.warn("\u5173\u5361payFile\u72b6\u6001\u4e2dparams\u4e3a\u5fc5\u4f20\u5b57\u6bb5\uff0c\u4e14\u8be5\u5b57\u6bb5\u9700\u4e3aObject\u7c7b\u578b\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003\u6587\u6863\u3002");"number"===t(a.params.amount)&&toString(a.params.amount).length<32?s.params.am=a.params.amount:s.params.am=0,"string"===t(a.params.desc)&&a.params.desc.length<64&&(s.params.desc=a.params.desc),s.lid=a.levelId,s.lnm=a.levelName,("string"===t(a.userId)&&a.userId)<32?s.uid=a.userId:s.uid="",s.un=a.userName,s.state="payFail",n=s,this.request()}},this.request=function(){var e=i(h);n.ls=r,e.ct=n,s(e,"level")}};for(var A=0;A<k.length;A++)!function(e,t){Object.defineProperty(wx,e,{value:t,writable:!1,enumerable:!0,configurable:!0})}(k[A],E[k[A]]);try{var T=wx.getSystemInfoSync();h.br=T.brand||"",h.md=T.model,h.pr=T.pixelRatio,h.sw=T.screenWidth,h.sh=T.screenHeight,h.ww=T.windowWidth,h.wh=T.windowHeight,h.lang=T.language,h.wv=T.version,h.sv=T.system,h.wvv=T.platform,h.fs=T.fontSizeSetting,h.wsdk=T.SDKVersion,h.bh=T.benchmarkLevel||"",h.bt=T.battery||"",h.wf=T.wifiSignal||"",h.lng="",h.lat="",h.nt="",h.spd="",h.ufo=""}catch(e){}}();